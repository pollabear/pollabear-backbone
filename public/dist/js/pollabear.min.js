var PB=PB||{};!function(){"use strict";var a={};a.getFullPoll=function(){var a={id:1,isAnswered:Boolean(Math.floor(2*Math.random())),text:"This is a much longer question than usual, but still quite important!?",votes:6e3,category:"Social",choices:[{text:"Choice text",id:"1",votes:2e3},{text:"Choice text",id:"2",votes:3e3},{text:"Choice text",id:"3",votes:1e3}],tags:["tag1","tag2"]};return a},a.getPolls=function(a){return 1==a?[{id:1,isAnswered:Boolean(Math.floor(2*Math.random())),text:"This is a much longer question than usual, but still quite important!?",votes:5e3,category:"Social",choices:[{text:"Choice text",id:"1",votes:3e3},{text:"Choice text",id:"2",votes:2e3}],tags:["tag1","tag2"]},{id:2,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:7004,category:"Social",choices:[{text:"Some longer choice text might go righhhhhht here. This is huge!",_id:"1",votes:1501},{text:"Some equally long choice text will go here!",_id:"2",votes:501},{text:"Choice text Choice text Choice text",_id:"3",votes:3001},{text:"Choice text Choice text Choice text Choice text",_id:"4",votes:2001}],tags:["tag1","tag2"]},{id:3,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:5005,category:"Sports",choices:[{text:"Choice text"},{text:"Choice text"},{text:"Choice text"}],tags:["tag1","tag2"]},{id:4,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:5005,category:"Funny",choices:[{text:"Choice text"},{text:"Choice text"},{text:"Choice text"},{text:"Choice text"},{text:"Choice text"}],tags:["tag1","tag2"]},{id:5,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:5005,category:"Politics",choices:[{text:"Choice text",_id:"1",votes:3005},{text:"Choice text",_id:"2",votes:2e3}],tags:["tag1","tag2"]}]:[{id:6,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:7004,category:"Politics",choices:[{text:"Some longer choice text might go righhhhhht here. This is huge!",_id:"1",votes:1501},{text:"Some equally long choice text will go here!",_id:"2",votes:501},{text:"Choice text Choice text Choice text",_id:"3",votes:3001},{text:"Choice text Choice text Choice text Choice text",_id:"4",votes:2001}],tags:["tag1","tag2"]},{id:7,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:5005,category:"Funny",choices:[{text:"Choice text",_id:"1",votes:3005},{text:"Choice text",_id:"2",votes:2e3}],tags:["tag1","tag2"]},{id:8,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:5005,category:"Social",choices:[{text:"Choice text"},{text:"Choice text"},{text:"Choice text"}],tags:["tag1","tag2"]},{id:9,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:5005,category:"Sports",choices:[{text:"Choice text",_id:"1",votes:3005},{text:"Choice text",_id:"2",votes:2e3}],tags:["tag1","tag2"]},{id:10,isAnswered:Boolean(Math.floor(2*Math.random())),text:"Some poll text",votes:7004,category:"Funny",choices:[{text:"Some longer choice text might go righhhhhht here. This is huge!",_id:"1",votes:1501},{text:"Some equally long choice text will go here!",_id:"2",votes:501},{text:"Choice text Choice text Choice text",_id:"3",votes:3001},{text:"Choice text Choice text Choice text Choice text",_id:"4",votes:2001}],tags:["tag1","tag2"]}]},a.getRandomPolls=function(a,b){for(var c,d=[],e=0;a>e;e++){c="all"!=b?b:this.categories[Math.floor(Math.random()*this.categories.length)];for(var f={id:Math.floor(1e4*Math.random()),isAnswered:Boolean(Math.floor(2*Math.random())),text:this.pollTexts[Math.floor(Math.random()*this.pollTexts.length)],votes:Math.floor(1e3*Math.random()+1),trackCount:Math.floor(300*Math.random()),commentCount:Math.floor(300*Math.random()),category:c,choices:[]},g=f.votes,h=Math.floor(5*Math.random()+2),i=!1,j=0;h>j;j++){var k,l=!1;if(j==h-1)k=g,f.isAnswered&&!i&&(l=!0);else if(k=Math.floor(Math.random()*(g+1)),g-=k,f.isAnswered&&!i){var m=Boolean(Math.floor(2*Math.random()));l=m,i=m}var n={isAnswered:l,id:Math.floor(1e4*Math.random()),text:this.choiceTexts[Math.floor(Math.random()*this.choiceTexts.length)],votes:k};f.choices.push(n)}d.push(f)}return d},a.categories=["social","politics","funny","sports","food","games","music","travel"],a.pollTexts=["Some poll text","More short poll text?","This is a much longer question than usual, but still quite important!?"],a.choiceTexts=["Choice text","A quite small choice","Something else here! should take 2 lines","Something else here! should take 3 lines now that I am getting big"],a.getPollDemographics=function(a){return{sex:[0,0,0],age:[0,0,0,0,0,0,0,0],sexual_orientation:[0,0,0,0],party_affiliation:[0,0,0,0,0],education:[0,0,0,0,0],religion:[0,0,0,0,0,0],employment:[0,0,0,0,0,0],ethnicity:[0,0,0,0,0,0],relationship:[0,0,0,0],residence:[0,0,0]}},PB.API=a}();var PB=PB||{};$(function(){"use strict";PB.router=new PB.PollabearRouter,PB.removeDropdowns=function(){$('.dropdown-content[data-active="true"]').attr("data-active","false").velocity({translateY:[-30,0],opacity:[0,1]},{complete:function(a){$(this).removeClass("dropdown-content-display")},duration:200})},$(document).click(PB.removeDropdowns),$("#overlay").click(function(a){(a.target==a.currentTarget||a.target==$("#overlay-content").get(0)||a.target==$("#overlay-exit").get(0))&&PB.router.navigate(PB.elements.main.state,!0)}),$(document).on("click","a[href^='/']",function(a){a.preventDefault(),a.stopPropagation();var b=$(a.currentTarget).attr("href");PB.router.navigate(b,!0)}),Backbone.history.start({pushState:!0,root:"/"})});var PB=PB||{};!function(){"use strict";PB.Poll=Backbone.Model.extend({}),PB.PollCollection=Backbone.Collection.extend({model:PB.Poll})}();var PB=PB||{};!function(a){"use strict";var b={nav:{$el:a("#nav")},main:{$el:a("#main"),active:!1},overlay:{$el:a("#overlay"),$content:a("#overlay-content"),active:!1}};b.activateOverlay=function(b,c){console.log("activateOverlay"),a("body").addClass("noscroll"),this.overlay.$el.removeClass("hidden");var d=this;setTimeout(function(){d.overlay.active=!0,d.overlay.view=new b(c),d.overlay.$content.html(d.overlay.view.$el),d.overlay.view.render(),d.overlay.$el.velocity({opacity:1},180)},100)},b.deactivateOverlay=function(){var b=this;this.overlay.$el.velocity({opacity:0,padding:0},200,function(){b.overlay.$el.addClass("hidden"),a("body").removeClass("noscroll"),b.overlay.active=!1,b.overlay.view.destroy()})},b.transitionMain=function(a,b){this.overlay.active&&this.deactivateOverlay(),this.main.state!=Backbone.history.getFragment()&&(this.main.active&&this.main.view.destroy(),this.main.view=new a(b),this.main.$el.html(this.main.view.$el),this.main.view.render(),this.main.active=!0),this.main.state=Backbone.history.getFragment()},b.transitionMainOrOverlay=function(a,b){this.main.active?this.main.state!=Backbone.history.getFragment()?this.activateOverlay(a,b):this.deactivateOverlay():this.transitionMain(a,b)},PB.elements=b}(jQuery);var PB=PB||{};!function(a){"use strict";PB.facebook={},a.getScript("//connect.facebook.net/en_US/sdk.js",function(){FB.init({appId:"1750824855143201",version:"v2.7"})}),PB.facebook.share=function(a){FB.ui({method:"share",href:a},function(a){console.log(a)})},PB.facebook.login=function(){FB.login(function(a){console.log(a)})}}(jQuery),function(){"use strict";Handlebars.registerHelper("upperCase",function(a){return a.charAt(0).toUpperCase()+a.slice(1)}),Handlebars.registerHelper("pollPercentage",function(a,b){return Math.round(b/a*1e4)/100+"%"})}();var PB=PB||{};!function(){"use strict";PB.Auth={facebookLogin:function(){axios.get("https://www.facebook.com/v2.8/dialog/oauth",{params:{client_id:"1750824855143201",redirect_uri:window.location.origin+"/"}}).then(function(a){console.log(a)})["catch"](function(a){console.log(a)})}}}();var PB=PB||{};!function(){"use strict"}();var PB=PB||{};!function(){"use strict";PB.PollabearRouter=Backbone.Router.extend({routes:{"":"home",categories:"categories","category/:category":"category",create:"create",profile:"profile","poll/:id":"poll",login:"login"},parseQueryString:function(a){var b,c,d,e,f={};if(!a)return f;for(b=a.split("&"),d=0,e=b.length;e>d;d++)c=b[d].split("="),f[c[0]]=c[1];return f},execute:function(a,b,c){var d="login"!=Backbone.history.getFragment(),e=!0;return PB.elements.nav.$el.show(),d&&!e?(Backbone.history.navigate("login",{trigger:!0}),!1):!d&&e?(Backbone.history.navigate("",{trigger:!0}),!1):(b.push(this.parseQueryString(b.pop())),void(a&&a.apply(this,b)))},home:function(a){console.log("home"),console.log(a),console.log(typeof a),PB.elements.transitionMain(PB.HomeView,{category:"all"})},categories:function(){console.log("categories"),PB.elements.transitionMainOrOverlay(PB.CategoryView,{})},category:function(a){console.log("category/"+a),PB.elements.transitionMain(PB.HomeView,{category:a})},create:function(){console.log("create"),PB.elements.transitionMainOrOverlay(PB.CreateView,{})},profile:function(){console.log("profile"),PB.elements.transitionMain(PB.ProfileView,{})},poll:function(a){console.log("poll/"+a),PB.elements.transitionMainOrOverlay(PB.PollDetail,{pollID:a})},login:function(){console.log("login"),PB.elements.nav.$el.hide()}})}(),this.JST=this.JST||{},this.JST["public/src/modules/CategoryModule/templates/category-grid.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<!-- Centered grid of categories -->\n\n		<div class="category-grid-element category-Music--overlay">\n			<a href="/category/politics">\n			<div class="iconContainer">\n				<i class="material-icons md-36">poll</i>\n			</div>\n			<div class="textContainer">\n				<h3 align="center">Politics</h3>\n			</div>\n			</a>\n		</div>\n\n		<div class="category-grid-element category-Social--overlay">\n			<a href="/category/social">\n			<div class="iconContainer">\n				<i class="material-icons md-36">poll</i>\n			</div>\n			<div class="textContainer">\n				<h3 align="center">Social</h3>\n			</div>\n			</a>\n		</div>\n\n		<div class="category-grid-element category-Funny--overlay">\n			<a href="/category/funny">\n			<div class="iconContainer">\n				<i class="material-icons md-36">poll</i>\n			</div>\n			<div class="textContainer">\n				<h3 align="center">Funny</h3>\n			</div>\n			</a>\n		</div>\n\n\n		<div class="category-grid-element category-Sports--overlay">\n			<a href="/category/sports">\n			<div class="iconContainer">\n				<i class="material-icons md-36">poll</i>\n			</div>\n			<div class="textContainer">\n				<h3 align="center">Sports</h3>\n			</div>\n			</a>\n		</div>\n\n		<div class="category-grid-element category-Food--overlay">\n			<a href="/category/food">\n			<div class="iconContainer">\n				<i class="material-icons md-36">poll</i>\n			</div>\n			<div class="textContainer">\n				<h3 align="center">Food</h3>\n			</div>\n			</a>\n		</div>\n\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>\n		\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>	\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>	\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>\n		<div class="category-grid-element">\n			<a href="">\n				<!-- centered icon goes here -->\n				<i class="material-icons md-36">poll</i>\n			</a>\n			<h3>category</h3>\n		</div>	\n\n\n'},useData:!0}),this.JST["public/src/modules/CreateModule/templates/choice-input.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div class="poll-form-choice">\n	<!-- <div class="poll-form-choice-container-1"> -->\n	<textarea class="choiceTextInput" name="choiceText" placeholder="Choice text here..."></textarea>\n	<!-- </div> -->\n\n	<div class=\'textarea-char-count choiceTextCount\' data-error=true data-max-char=80>0 / 80</div>\n\n	<div class="poll-form-choice-container">\n		<button class="removeChoiceInputButton" type="button">X</button>\n	</div>\n</div>'},useData:!0}),this.JST["public/src/modules/CreateModule/templates/create.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'\n<!-- <form name="poll-form" novalidate> -->\n	<div class="create-section-poll">\n	\n		<div class="create-section-question">  \n			<textarea id="questionTextInput" name="questionText" placeholder="Question text here..." autofocus></textarea>\n			<div class=\'textarea-char-count\' data-error=true data-max-char=100>0 / 100</div>\n		</div>\n\n		<div class="create-section-choices">\n			<div class="create-choices">\n				\n			</div>\n	        <button id=\'addChoiceInputButton\' type="button">+ New Choice</button>  \n		</div>\n\n	</div>\n\n\n\n\n\n\n\n\n	</br>\n\n	<div class="create-section-category">\n\n		<div class="create-section-category-header">\n			<h3>Select Category</h3>\n		</div>\n\n		<div class="create-section-category-grid">\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>		\n			<div class="create-section-category-block" data-category="Politics">\n				<i class="material-icons">share</i>\n				<span>Politics</span>	\n			</div>							\n		</div>\n\n\n		\n		\n<!-- 		<div class="form-group">\n            <label>Select Category</label>\n            <select type="text" name="categorySelect" class="form-control" required>\n                <option value="0">Business</option>\n                <option value="1">Entertainment</option>\n  				<option value="2">Fashion</option>\n  				<option value="3">Food</option>\n  				<option value="4">Funny</option>\n  				<option value="5">Games</option>\n  				<option value="6">Health</option>\n  				<option value="7">Lifestyle</option>\n  				<option value="8">Music</option>\n  				<option value="9">Politics</option>\n  				<option value="10">Science</option>\n  				<option value="11">Social</option>\n  				<option value="12">Sports</option>\n  				<option value="13">Technology</option>\n  				<option value="14">Travel</option>\n  				<option value="15">Miscellaneous</option>\n            </select>\n    	</div>    --> \n\n	</div>\n    \n	</br>\n\n    <button id="submitPollButton" disabled>CREATE</button>\n    \n<!-- </form> -->\n\n'},useData:!0}),this.JST["public/src/modules/HomeModule/templates/home.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'<div id="grid-container">\n    <div id="masonry-grid">\n<!--         <div class="stamp-banner"><span class="pollapoints-number">10495</span> <span class="pollapoints-text">pollapoints</span></div> -->\n    </div>\n    <img id="spinner" src="http://www.all.biz/img/preloader.gif">\n</div>\n\n<div id="grid-footer">\n    <!-- <img id="spinner" class="spinner-center" src="http://www.all.biz/img/preloader.gif"> -->\n</div>\n\n<!-- <div id="sidebar">\n    <div class="sidebar-pollabear">\n       <img class= "user-pollabear" src="http://i.istockimg.com/file_thumbview_approve/56146906/3/stock-illustration-56146906-comic-cartoon-little-polar-bear.jpg"> \n    </div>\n    <div class="sidebar-pollapoints">\n        <span class="pollapoints-number">5600</span><span class="pollapoints-text">pollapoints</span>\n    </div>\n    <div class="sidebar-more">\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n        <div class="sidebar-more-element"></div>\n    </div>\n</div> -->'},useData:!0}),this.JST["public/src/modules/PollDetailModule/templates/pollpage.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return'\n\n<div class="pollpage-container">\n	\n	<!-- Asker\'s Bear -->\n\n	<div class="pollpage-bear">\n		<!-- Put placeholder bear sillouette -->\n	</div>\n\n	<!-- Expanded Poll -->\n\n	<div class="pollpage-section pollpage-section--poll">\n		<!-- <h2>Question</h2> -->\n		<div class="pollpage-section-content hidden"></div>\n		<div class="pollpage-section-loading"></div>\n	</div>\n\n	<!-- Poll Data Graphs -->\n\n	<div class="pollpage-section pollpage-section--graphs hidden">\n		<h2>Graphs</h2>\n		<canvas id="DemographicChart" width="900" height="250"></canvas>\n		<div class="pollpage-section-content hidden"></div>\n		<div class="pollpage-section-loading "></div>\n	</div>\n\n	<!-- Poll Choice Reasonings -->\n\n	<div class="pollpage-section pollpage-section--reasonings hidden">\n		<h2>Reasonings</h2>\n		<div class="pollpage-section-content hidden"></div>\n		<div class="pollpage-section-loading"></div>\n	</div>\n\n	<!-- Poll Comments -->\n\n	<div class="pollpage-section pollpage-section--comments hidden">\n		<h2>Comments</h2>\n		<div class="pollpage-section-content hidden"></div>\n		<div class="pollpage-section-loading"></div>\n	</div>\n\n	<div class="pollpage-section pollpage-section--footer"></div>\n\n</div>\n\n'},useData:!0}),this.JST["public/src/modules/PollModule/templates/photo_poll.hbs"]=Handlebars.template({1:function(a,b,c,d,e){return"	    <span>#"+a.escapeExpression(a.lambda(b,b))+"&#32</span>\n"},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){var f,g=a.lambda,h=a.escapeExpression;return'<div class="poll">\n	<div class="poll-header">\n        <div class="poll-header-track"></div>\n        <h4 class="poll-header-text" align="center">\n            '+h(g(null!=(f=null!=b?b.poll:b)?f.text:f,b))+'\n        </h4>\n    </div>\n\n	    <!--  -->\n	    <!--  -->\n\n<!-- 	<div ng-if="::mypolla.choiceType == 1" class="poll-body-photo">\n		<div ng-repeat="mychoice in ::mypolla.choices" \n				class="photochoice" \n				ng-click="::choiceSelected(mychoice._id, mypolla)"\n				ng-class="{\'unanswered\': !mypolla.answered}">\n			<div class="photochoice-body">\n                <img class="photochoice-body-img" ng-src="'+h(g(null!=(f=null!=b?b["::mychoice"]:b)?f.imgPath:f,b))+'">\n\n\n	                <div class="photochoice-body-overlay" ng-if="mypolla.answered"></div>\n	                <div class="photochoice-body-percent-overlay"\n	                	ng-if="mypolla.answered"\n	                	ng-style="::{ \'height\' : ((mychoice.votes / mypolla.votes) * 150) + \'%\' }" 	\n	            		ng-class="{\'choice-overlay-visible\': mypolla.answered}"></div>\n	                <h1 class="photochoice-body-percent-text choice-percent-text" ng-if="mypolla.answered">\n	                    ::(((mychoice.votes / mypolla.votes) * 100) | number:1 )<span class="photochoice-body-percent-symbol">%</span> \n	                </h1>\n\n\n            </div>\n            <div class="photochoice-footer">\n\n                <h5 class="photochoice-footer-text">\n                    '+h(g(null!=b?b.text:b,b))+'\n                </h5>\n            </div>\n		</div>\n	</div>\n -->\n	<!--  -->\n	<!--  -->\n\n	<div class="poll-footer-data">\n	    <h6 class="poll-footer-data-category">\n	        '+h(g(null!=(f=null!=b?b.poll:b)?f.category:f,b))+'\n	    </h6>\n	    <h6 class="poll-footer-data-votes">\n	        '+h(g(null!=(f=null!=b?b.poll:b)?f.votes:f,b))+' votes\n	    </h6>\n	</div>\n\n	<h6 class="poll-footer-more">\n'+(null!=(f=c.each.call(null!=b?b:{},null!=(f=null!=b?b.poll:b)?f.tags:f,{name:"each",hash:{},fn:a.program(1,e,0),inverse:a.noop,data:e}))?f:"")+"	</h6>\n\n</div>"},useData:!0}),this.JST["public/src/modules/PollModule/templates/poll-expanded.hbs"]=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i=a.lambda,j=a.escapeExpression;return'		<div class="choice-expanded textchoice-expanded" data-choiceid="'+j(i(null!=b?b.id:b,b))+'">\n	        <div class="textchoice-expanded-overlay category-'+j(i(null!=(h=null!=g[1]?g[1].poll:g[1])?h.category:h,b))+'--overlay"></div>\n	        <div class="textchoice-expanded-main">\n	            <div class="textchoice-expanded-main-check">\n	                \n	            </div>\n	            <div class="textchoice-expanded-main-text">\n	                '+j(i(null!=b?b.text:b,b))+'\n	            </div>\n	            <div class="textchoice-expanded-text-main-percent choice-percent-text"> \n\n	            </div>\n	        </div>\n		</div>\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=a.lambda,j=a.escapeExpression;return'<div class="poll-expanded unanswered category-'+j(i(null!=(h=null!=b?b.poll:b)?h.category:h,b))+'--border">\n	<div class="poll-expanded-header">\n        <!-- <div class="poll-header-track"></div> -->\n        <div class="poll-expanded-header-text">\n            '+j(i(null!=(h=null!=b?b.poll:b)?h.text:h,b))+'\n        </div>\n    </div>\n\n    <!--  -->\n    <!--  -->\n\n    <div class="poll-expanded-body">\n'+(null!=(h=c.each.call(null!=b?b:{},null!=(h=null!=b?b.poll:b)?h.choices:h,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'	</div>\n\n	<!--  -->\n	<!--  -->\n\n	<div class="poll-expanded-footer-data">\n        <span class="poll-expanded-footer-data-category">\n        	<select class="demographic-selector">\n				<option value="male">Male voters</option>\n				<option value="female">Female voters</option>\n				<option value="single">Single voters</option>\n				<option value="married">Married voters</option>\n			</select>\n\n<!-- 			<div class="demographic-selector ui inline dropdown">\n			  <input type="hidden" name="gender">\n			  <div class="text">Shiba Inu</div>\n			  <i class="dropdown icon"></i>\n			  <div class="menu">\n			    <div class="item">\n			      <i class="dropdown icon"></i>\n			      <span class="text">Dogs</span>\n			      <div class="menu">\n			        <div class="item">Shiba Inu</div>\n			        <div class="item">\n			          <i class="dropdown icon"></i>\n			          <span class="text">Poodle</span>\n			          <div class="menu">\n			            <div class="item">Toy</div>\n			            <div class="item">Standard</div>\n			          </div>\n			        </div>\n			        <div class="item">Labrador</div>\n			      </div>\n			    </div>\n			    <div class="item">\n			      <i class="dropdown icon"></i>\n			      <span class="text">Cats</span>\n			      <div class="menu">\n			        <div class="item">Aegean</div>\n			        <div class="item">Balinese</div>\n			        <div class="item">Persian</div>\n			      </div>\n			    </div>\n			  </div>\n			</div> -->\n\n        </span>\n        <span class="poll-expanded-footer-data-votes">'+j(i(null!=(h=null!=b?b.poll:b)?h.category:h,b))+" &middot; "+j(i(null!=(h=null!=b?b.poll:b)?h.votes:h,b))+" votes</span>\n    </div>\n\n</div>"},useData:!0,useDepths:!0}),this.JST["public/src/modules/PollModule/templates/text_poll.hbs"]=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i=a.lambda,j=a.escapeExpression;return'		<div class="choice textchoice" data-choiceid="'+j(i(null!=b?b.id:b,b))+'">\n	        <div class="textchoice-overlay category-'+j(i(null!=(h=null!=g[1]?g[1].poll:g[1])?h.category:h,b))+'--background"></div>\n	        <div class="textchoice-main">\n	            <div class="textchoice-main-check">\n	                <i class="material-icons icon-check">done</i>\n	            </div>\n	            <div class="textchoice-main-text">\n	                '+j(i(null!=b?b.text:b,b))+'\n	            </div>\n	            <div class="choice-percent-text"> \n\n	            </div>\n	        </div>\n		</div>\n'},3:function(a,b,c,d,e){return"\n	        <span>#"+a.escapeExpression(a.lambda(b,b))+"&#32</span>\n	        "},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){var h,i=a.lambda,j=a.escapeExpression,k=null!=b?b:{};return'<div class="poll unanswered">  <!-- category-'+j(i(null!=(h=null!=b?b.poll:b)?h.category:h,b))+'--shadow"> -->\n	<div class="poll-header">\n        <!-- <div class="poll-header-track"></div> -->\n        <!--  -->\n        <!-- <img class="poll-header-img" src="http://sites.psu.edu/edkawong/wp-content/uploads/sites/15056/2015/03/Tm70k2m.jpg"> -->\n\n        <div class="poll-header-text">\n        <a href="/poll/'+j(i(null!=(h=null!=b?b.poll:b)?h.id:h,b))+'">\n            '+j(i(null!=(h=null!=b?b.poll:b)?h.text:h,b))+"\n        </a>\n        </div>\n    </div>\n\n    <!--  -->\n    <!-- "+j(i(null!=(h=null!=g[1]?g[1].poll:g[1])?h.category:h,b))+' -->\n\n    <div class="poll-body">\n'+(null!=(h=c.each.call(k,null!=(h=null!=b?b.poll:b)?h.choices:h,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'	</div>\n\n	<!--  -->\n	<!--  -->\n\n	<div class="poll-footer-data">\n        <a class="poll-footer-data-category" href="/category/'+j(i(null!=(h=null!=b?b.poll:b)?h.category:h,b))+'">\n            '+j((c.upperCase||b&&b.upperCase||c.helperMissing).call(k,null!=(h=null!=b?b.poll:b)?h.category:h,{name:"upperCase",hash:{},data:e}))+'\n        </a>\n        <span class="poll-footer-data-votes">'+j(i(null!=(h=null!=b?b.poll:b)?h.votes:h,b))+' votes</span>\n    </div>\n\n    <div class="poll-footer-actions clearfix">\n\n        <span class="poll-footer-actions-track">\n            <i class="material-icons md-24 icon-actions icon-lightgrey">favorite</i>\n            <span class="poll-footer-actions-track-number">'+j(i(null!=(h=null!=b?b.poll:b)?h.trackCount:h,b))+'</span>\n        </span>\n\n\n        <span class="poll-footer-actions-comments">\n            <i class="material-icons md-24 icon-actions icon-lightgrey">comment</i>\n            <span class="poll-footer-actions-comments-number">'+j(i(null!=(h=null!=b?b.poll:b)?h.commentCount:h,b))+'</span>\n        </span>\n\n        <div class="dropdown dropup poll-footer-actions-more">\n            <span>\n                <i class="material-icons md-36 icon-actions icon-lightgrey">more_horiz</i>\n            </span>\n\n            <div class="dropdown-content poll-dropup-content clearfix" data-active=false>\n                <div class="poll-dropup-content-icon icon-facebook">Share</div>\n                <div class="poll-dropup-content-icon">Track</div>\n                <div class="poll-dropup-content-icon">Data</div>\n                <div class="poll-dropup-content-icon">Report</div>\n            </div>\n        </div>\n\n        <!-- <div class="clear"></div> -->\n\n\n        <!-- <div class="dropup icon-more">\n            <i class="material-icons md-36 icon-more icon-lightgrey" data-toggle="dropdown">poll</i>\n            <ul class="dropdown-menu" aria-labelledby="dropdownMenu2">\n                <li><a href="#">Action</a></li>\n                <li><a href="#">Another action</a></li>\n                <li><a href="#">Something else here</a></li>\n                <li role="separator" class="divider"></li>\n                <li><a href="#">Separated link</a></li>\n            </ul>\n        </div> -->\n\n<!--     	<i class="material-icons md-36 icon-more icon-lightgrey">poll</i>\n    	<i class="material-icons md-36 icon-more icon-lightgrey">people</i>\n    	<i class="material-icons md-36 icon-more icon-lightgrey">comment</i>\n    	<i class="material-icons md-36 icon-more icon-lightgrey">favorite</i> -->\n\n    <!-- 	<p> -->\n	    	<!-- '+(null!=(h=c.each.call(k,null!=(h=null!=b?b.poll:b)?h.tags:h,{name:"each",hash:{},fn:a.program(3,e,0,f,g),inverse:a.noop,data:e}))?h:"")+" -->\n   <!--      </p> -->\n    </div>\n\n</div>"},useData:!0,useDepths:!0}),this.JST["public/src/modules/PollModule/templates/text_poll_expanded.hbs"]=Handlebars.template({1:function(a,b,c,d,e,f,g){var h,i=a.lambda,j=a.escapeExpression;return'		<div class="choice textchoice" data-choiceid="'+j(i(null!=b?b.id:b,b))+'">\n	        <div class="textchoice-overlay category-'+j(i(null!=(h=null!=g[1]?g[1].poll:g[1])?h.category:h,b))+'--background"></div>\n	        <div class="textchoice-main textchoice-main-expanded">\n	            <div class="textchoice-main-check">\n	                <i class="material-icons icon-check">done</i>\n	            </div>\n	            <div class="textchoice-main-text">\n	                '+j(i(null!=b?b.text:b,b))+'\n	            </div>\n	            <div class="choice-percent-text choice-percent-text-expanded"> \n\n	            </div>\n	        </div>\n		</div>\n'},compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e,f,g){
var h,i=a.lambda,j=a.escapeExpression,k=null!=b?b:{};return'<div class="poll unanswered">  <!-- category-'+j(i(null!=(h=null!=b?b.poll:b)?h.category:h,b))+'--shadow"> -->\n	<div class="poll-header">\n\n        <div class="poll-header-text poll-header-text-expanded">\n            '+j(i(null!=(h=null!=b?b.poll:b)?h.text:h,b))+"\n        </div>\n    </div>\n\n    <!--  -->\n    <!-- "+j(i(null!=(h=null!=g[1]?g[1].poll:g[1])?h.category:h,b))+' -->\n\n    <div class="poll-body">\n'+(null!=(h=c.each.call(k,null!=(h=null!=b?b.poll:b)?h.choices:h,{name:"each",hash:{},fn:a.program(1,e,0,f,g),inverse:a.noop,data:e}))?h:"")+'	</div>\n\n	<!--  -->\n	<!--  -->\n\n	<div class="poll-footer-data poll-footer-data-expanded">\n        <a class="poll-footer-data-category" href="/category/'+j(i(null!=(h=null!=b?b.poll:b)?h.category:h,b))+'">\n            '+j((c.upperCase||b&&b.upperCase||c.helperMissing).call(k,null!=(h=null!=b?b.poll:b)?h.category:h,{name:"upperCase",hash:{},data:e}))+'\n        </a>\n        <span class="poll-footer-data-votes">'+j(i(null!=(h=null!=b?b.poll:b)?h.votes:h,b))+' votes</span>\n    </div>\n\n    <div class="poll-footer-actions clearfix">\n\n        <span class="poll-footer-actions-track">\n            <i class="material-icons md-24 icon-actions icon-lightgrey">favorite</i>\n            <span class="poll-footer-actions-track-number">'+j(i(null!=(h=null!=b?b.poll:b)?h.trackCount:h,b))+'</span>\n        </span>\n\n\n        <span class="poll-footer-actions-comments">\n            <i class="material-icons md-24 icon-actions icon-lightgrey">comment</i>\n            <span class="poll-footer-actions-comments-number">'+j(i(null!=(h=null!=b?b.poll:b)?h.commentCount:h,b))+'</span>\n        </span>\n\n        <div class="dropdown dropup poll-footer-actions-more">\n            <span>\n                <i class="material-icons md-36 icon-actions icon-lightgrey">more_horiz</i>\n            </span>\n\n            <div class="dropdown-content poll-dropup-content clearfix" data-active=false>\n                <div class="poll-dropup-content-icon">Share</div>\n                <div class="poll-dropup-content-icon">Track</div>\n                <div class="poll-dropup-content-icon">Data</div>\n                <div class="poll-dropup-content-icon">Report</div>\n            </div>\n        </div>\n\n    </div>\n\n</div>'},useData:!0,useDepths:!0}),this.JST["public/src/modules/PollabearModule/templates/design.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return"<div>\n	\n	<!-- Display container -->\n	<div>\n		\n		<!-- Relative Container for img layering -->\n		<div>\n			\n			<!-- Baseline pollabear to layer pollabear items on -->\n			<img>\n\n\n\n		</div>\n\n	</div>\n\n\n	<!-- Sections for accesory types -->\n	<div>\n		<!-- Hats -->\n		<div>\n			\n		</div>\n\n		<!-- Eyeware -->\n		<div>\n			\n		</div>\n\n		<!-- Facial Hair -->\n		<div>\n			\n		</div>\n\n		<!-- MORE! -->\n	</div>\n\n</div>\n\n\n<!-- \n		General Logic\n\n	- only one accesory of a given type can be selected at a time\n\n	- accessory types have a z-order specification to ensure proper layering\n\n	- if an accessory is selected, enable the save button\n\n	- server needs to put together image after user saves updates to customized bear by layering the images on the server-side\n		- server gathers all imgs necessary, orders everything by priority, layers and saves final img to s3, then updates s3 file location in user record\n\n	- accessory {\n		owned: bool,\n		selected: bool,\n		priority: num  // corresponds to expected z-index\n	}\n\n\n\n -->"},useData:!0}),this.JST["public/src/modules/ProfileModule/templates/profile.hbs"]=Handlebars.template({compiler:[7,">= 4.0.0"],main:function(a,b,c,d,e){return"<h1>Profile Page</h1>"},useData:!0});var PB=PB||{};!function(a){"use strict";PB.CategoryView=Backbone.View.extend({className:"category-grid",initialize:function(){this.$el.html(JST["public/src/modules/CategoryModule/templates/category-grid.hbs"]())},destroy:function(){this.remove()}})}(jQuery);var PB=PB||{};!function(a){"use strict";PB.CreateView=Backbone.View.extend({className:"container-create",events:{"click #submitPollButton":"submitPoll","keydown textarea":"preventEnter","input textarea":"dynamicInput","click #addChoiceInputButton":"addChoiceInput","click .removeChoiceInputButton":"removeChoiceInput","click .create-section-category-block":"selectCategory"},initialize:function(){this.$el.html(JST["public/src/modules/CreateModule/templates/create.hbs"]()),this.$choiceSection=this.$(".create-choices"),this.$newChoiceInputButton=this.$("#addChoiceInputButton"),this.$submitButton=this.$("#submitPollButton"),this.choiceInputHtml=JST["public/src/modules/CreateModule/templates/choice-input.hbs"](),this.$choiceSection.append(a(this.choiceInputHtml),a(this.choiceInputHtml)),this.choiceFormCount=2,this.errorCount=4},setError:function(a){this.errorCount+=a,console.log(this.errorCount),0==this.errorCount?this.$submitButton.prop("disabled",!1):this.$submitButton.prop("disabled",!0)},preventEnter:function(a){13==a.which&&a.preventDefault()},dynamicInput:function(b){var c=a(b.currentTarget);c.height(1);var d=c.prop("scrollHeight")-parseInt(c.css("padding-top"))-parseInt(c.css("padding-bottom"));c.height(d);var e=c.val().length,f=c.siblings(".textarea-char-count"),g=f.data("max-char");f.html(e+" / "+g);var h=f.data("error");!h&&(e>g||0>=e)?(console.log("char count error"),f.addClass("char-count-error"),f.data("error",!0),this.setError(1)):h&&g>=e&&e>0&&(console.log("remove char count error"),f.removeClass("char-count-error"),f.data("error",!1),this.setError(-1))},addChoiceInput:function(b){console.log("addChoice");var c=a(this.choiceInputHtml).hide();this.$choiceSection.append(c),c.show(300),this.setError(1),this.choiceFormCount++,this.choiceFormCount>=6&&this.$newChoiceInputButton.prop("disabled",!0)},removeChoiceInput:function(b){console.log("removeChoice");var c=a(b.currentTarget).parents(".poll-form-choice");if(2==this.choiceFormCount){var d=c.children(".choiceTextInput");if(0!=d.val().length){d.val("");var e=c.children(".textarea-char-count");this.setError(1),e.data("error",!0);var f=e.data("max-char");e.html("0 / "+f),e.removeClass("char-count-error")}}else{var e=c.children(".textarea-char-count");e.data("error")&&this.setError(-1),c.hide(300,function(){c.remove()}),this.choiceFormCount--,this.choiceFormCount<6&&this.$newChoiceInputButton.prop("disabled",!1)}},selectCategory:function(b){this.$currentCategory&&this.$currentCategory.get(0)==b.currentTarget?(this.$currentCategory.removeClass("create-category-selected"),this.$currentCategory=null,this.setError(1)):(this.$currentCategory?this.$currentCategory.removeClass("create-category-selected"):this.setError(-1),this.$currentCategory=a(b.currentTarget),this.$currentCategory.addClass("create-category-selected"))},submitPoll:function(){console.log("submitPoll")},destroy:function(){this.remove()}})}(jQuery);var PB=PB||{};!function(a){"use strict";PB.HomeView=Backbone.View.extend({initialize:function(a){this.options=a,this.$el.html(JST["public/src/modules/HomeModule/templates/home.hbs"]())},render:function(){this.$pollGrid||(this.$pollGrid=new PB.PollGrid({el:this.$("#masonry-grid"),category:this.options.category}),this.$pollGrid.render())},destroy:function(){this.$pollGrid.destroy(),this.remove()}})}(jQuery);var PB=PB||{};!function(a){"use strict";PB.PollGrid=Backbone.View.extend({events:{},initialize:function(b){console.log("Creating PollGrid"),this.options=b,this.scrollTolerance=600,this.category=this.options.category||"all",this.paginationURL=this.options.paginationURL,this.currentPage=0,this.loading=!1,this.$newPolls=[],this.$spinner=a("#spinner"),this.polls=new PB.PollCollection,PB.retrievedPolls=this.polls,this.listenTo(this.polls,"add",this.addPoll),this.listenTo(this.polls,"update",this.newPolls);var c=this;a(window).scroll(function(){a(window).scrollTop()+a(window).height()>a(document).height()-c.scrollTolerance&&(c.loading||c.getPolls())});var d={columnWidth:275,isFitWidth:!0,itemSelector:".poll-wrapper",transitionDuration:0,gutter:20};this.$el.masonry(d)},render:function(){return this.getPolls(),this},addPoll:function(a){var b=new PB.PollView({model:a,isGridPoll:!0});this.$newPolls.push(b.$el)},newPolls:function(){for(var a=this.$newPolls.length-1;a>=0;a--)this.$el.append(this.$newPolls[a]).masonry("appended",this.$newPolls[a]),this.$newPolls[a].css({height:this.$newPolls[a].height()}),this.$newPolls[a].velocity("fadeIn",{duration:300});this.$newPolls=[]},getPolls:function(){this.loading=!0,this.$spinner.show(),this.currentPage=this.currentPage+1;var a=this;setTimeout(function(){a.polls.add(PB.API.getRandomPolls(40,a.category)),a.currentPage<20&&(a.loading=!1),a.$spinner.hide(),console.log("Polls loaded")},400)},toggleIconBrightness:function(b){a(b.currentTarget).toggleClass("icon-darkgrey")},destroy:function(){console.log("Destroying PollGrid");for(var b;b=this.polls.first();)b.trigger("destroy",b,b.collection);a(window).off("scroll"),this.remove()}})}(jQuery);var PB=PB||{};!function(a){"use strict";PB.PollDetail=Backbone.View.extend({events:{},initialize:function(a){if(this.$el.html(JST["public/src/modules/PollDetailModule/templates/pollpage.hbs"]()),this.$bear=this.$(".pollpage-bear"),this.$poll=this.$(".pollpage-section--poll"),this.$graph=this.$(".pollpage-section--graphs"),this.$reasonings=this.$(".pollpage-section--reasonings"),this.$comments=this.$(".pollpage-section--comments"),this.pollID=a.pollID,PB.retrievedPolls&&(this.model=PB.retrievedPolls.get(this.pollID)),this.model)this.listenTo(this.model,"change",this.render),this.pollView=new PB.PollView({model:this.model}),this.$poll.html(this.pollView.el);else{var b=this;setTimeout(function(){b.model=new PB.Poll(PB.API.getRandomPolls(1,"all")[0]),b.listenTo(b.model,"change",b.render),b.pollView=new PB.PollView({model:b.model}),b.$poll.html(b.pollView.el)},900)}},render:function(){},destroy:function(){console.log("destroying PollDetail"),this.pollView.remove(),this.remove()},activateChart:function(){this.$graph.removeClass("hidden");var a=this.$graph.children("#DemographicChart").get(0).getContext("2d"),b={labels:["This is a reallllllly ","choice2","choice3","choice4"],datasets:[{label:"white",fillColor:"rgba(200,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[35,20,80,81]},{label:"asian",fillColor:"rgba(151,187,255,0.5)",strokeColor:"rgba(151,187,205,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(151,187,205,1)",data:[18,22,40,19]},{label:"black",fillColor:"rgba(220,220,220,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[5,35,80,81]},{label:"latino/hispanic",fillColor:"rgba(11,187,205,0.5)",strokeColor:"rgba(151,187,205,0.8)",highlightFill:"rgba(151,187,205,0.75)",highlightStroke:"rgba(151,187,205,1)",data:[22,5,40,19]},{label:"other",fillColor:"rgba(220,220,20,0.5)",strokeColor:"rgba(220,220,220,0.8)",highlightFill:"rgba(220,220,220,0.75)",highlightStroke:"rgba(220,220,220,1)",data:[20,18,80,81]}]};this.$chart=new Chart(a).Bar(b,{responsive:!1,labelLength:10,multiTooltipTemplate:"<%= datasetLabel %> - <%= value %>%",scaleOverride:!0,scaleSteps:5,scaleStepWidth:20,scaleStartValue:0,barDatasetSpacing:0,barValueSpacing:20})}})}(jQuery);var PB=PB||{};!function(a){"use strict";function b(a){var b=a.getBoundingClientRect(),c=window.innerHeight||document.documentElement.clientHeight;return b.top>=-2e3&&b.top+b.height<=c+2e3}PB.PollView=Backbone.View.extend({events:{"mouseenter .unanswered .choice":"toggleChoiceHighlight","mouseleave .unanswered .choice":"toggleChoiceHighlight","click .unanswered .choice":"answerPoll","click .icon-facebook":"sharePoll","click .poll-footer-actions-more":"showMoreActions","change .demographic-selector":"changeData"},className:"poll-wrapper",initialize:function(c){this.options=c,this.isGridPoll=this.options.isGridPoll,this.isGridPoll?this.$el.html(JST["public/src/modules/PollModule/templates/text_poll.hbs"]({poll:this.model.attributes})):(this.$el.addClass("poll-wrapper-expanded"),this.$el.removeClass("poll-wrapper"),this.$el.html(JST["public/src/modules/PollModule/templates/text_poll_expanded.hbs"]({poll:this.model.attributes}))),this.$poll=this.$(".poll");var d=this;this.hidden=!1,a(window).on("resize scroll",_.throttle(function(){var a=b(d.el);a||d.hidden||(d.$poll.addClass("hidden"),d.hidden=!0),a&&d.hidden&&(d.$poll.removeClass("hidden"),d.hidden=!1)},500)),this.listenTo(this.model,"change:isAnswered",this.render),this.listenTo(this.model,"change:votes",this.renderVoteCount),this.listenTo(this.model,"destroy",this.remove),this.render()},render:function(){return this.model.get("isAnswered")&&this.changeData(),this},answerPoll:function(b){a(b.currentTarget).removeClass("choice-highlight");var c=a(b.currentTarget).data("choiceid"),d=this.model.get("votes");this.model.set("votes",d+1);for(var e=this.model.get("choices"),f=e.length-1;f>=0;f--)if(e[f].id==c){e[f].votes++,e[f].isAnswered=!0;break}this.model.set("isAnswered",!0)},changeData:function(){var b,c=this;console.log(this.isGridPoll),b=this.isGridPoll?1:10,this.$poll.removeClass("unanswered").find(".choice").each(function(d){var e=c.model.get("choices")[d],f=Math.round(e.votes/c.model.get("votes")*b*100)/b+"%";a(this).find(".choice-percent-text").velocity("fadeIn",{duration:350}).html(f),e.isAnswered&&a(this).find(".textchoice-main-check").velocity("fadeIn",{duration:350}),a(this).children(".textchoice-overlay").velocity({width:[f,0]},[.29,.9,.53,1.23],350)})},increaseBarHeight:_.debounce(function(a){this.$poll.find(".textchoice-overlay").velocity({height:"8px"},[.29,.9,.53,1.23],350)},200),decreaseBarHeight:function(a){this.$poll.find(".textchoice-overlay").velocity({height:"100%"},[.29,.9,.53,1.23],350)},toggleChoiceHighlight:function(b){a(b.currentTarget).toggleClass("choice-highlight")},showMoreActions:function(a){a.stopPropagation();var b=this.$(".poll-dropup-content");console.log(b.attr("data-active")),"true"==b.attr("data-active")?(b.attr("data-active","false"),b.velocity({translateY:[-30,0],opacity:[0,1]},{complete:function(a){b.removeClass("dropdown-content-display")},duration:200})):(PB.removeDropdowns(),b.attr("data-active","true"),b.addClass("dropdown-content-display"),b.velocity({translateY:[0,-30],opacity:[1,0]},200))},sharePoll:function(a){a.stopPropagation(),PB.facebook.login()},renderVoteCount:function(){this.$(".poll-footer-data-votes").html(this.model.get("votes")+" votes")}})}(jQuery);var PB=PB||{};!function(a){"use strict";PB.DesignView=Backbone.View.extend({initialize:function(){this.$el.html(JST["public/src/modules/PollabearModule/templates/design.hbs"]())},render:function(){},destroy:function(){this.remove()}})}(jQuery);var PB=PB||{};!function(a){"use strict";PB.ProfileView=Backbone.View.extend({className:"container-profile",events:{},initialize:function(){this.$el.html(JST["public/src/modules/ProfileModule/templates/profile.hbs"]())},destroy:function(){this.remove()}})}(jQuery);